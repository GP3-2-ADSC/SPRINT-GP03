<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/cadastro.css">
    <link rel="shortcut icon" href="./assets/favicon.ico" type="image/x-icon">

    <script src="./js/funcoes.js"></script>
    <script src="./js/transicao.js"></script>
    <script src="./js/cadastro.js"></script>

    <title>Retria | Cadastro de administrador</title>
</head>

<body>
    <div class="header-background">
        <div id="header" class="header-container row">
            <a href="./index.html"><img class="logo-header" src="./assets/testelogoSprint copiar.png"
                    alt="Logo azul da Retria" width="140px"></a>

            <div class="navbar">
                <ul>
                    <li><a href="./index.html" class="link">Início</a></li>
                    <li><a href="./index.html#servicos" class="link">Serviços</a></li>
                    <li><a href="./cadastro.html" class="link">Cadastro</a></li>
                    <li><a href="./login.html" class="link">Login</a></li>
                </ul>
            </div>
            <span class="menu" onclick="openClose(1)">&#9776;</span>
        </div>
    </div>

    <div id="myNav" class="overlay">
        <a href="javascript:void(0)" class="closebtn " onclick="openClose(0)">&times;</a>
        <div class="overlay-content">
            <a href="./index.html">Início</a>
            <a href="./index.html#servicos">Serviços</a>
            <a href="./cadastro.html">Cadastro</a>
            <a href="./login.html">Login</a>
        </div>
    </div>
    
    <div class="background center">
        <div class="container">
            <div class="card_erro" id="cardErro">
                <span id="mensagem_erro"></span>
            </div>

            <div class="caixa-formulario" id="caixaFormulario">
                <div class="campo">
                    <h2>Junte-se a nós</h2>
                    <h4>Cadastre o administrador de monitoramento</h4>
                </div>

                <div class="linha">
                    <div class="campo">
                        <input required="" type="text" name="text" autocomplete="off" class="input" id="in_nomeAdm">
                        <label class="user-label">Nome do administrador</label>
                        <span class="span-required" id="span-nome_admin">É necessário inserir um nome.</span>
                    </div>

                    <div class="campo">
                        <input required="" type="text" name="text" autocomplete="off" class="input" id="in_cargo">
                        <label class="user-label">Cargo</label>
                        <span class="span-required" id="span-cargo-admin">É necessário inserir um cargo.</span>
                    </div>
                </div>

                <div class="linha">
                    <div class="campo">
                        <input required="" type="text" name="text" autocomplete="off" maxlength="15" class="input" id="in_telefone" onkeyup="mascaraTelefoneAdmin()">
                        <label class="user-label">Celular / Telefone</label>
                        <span class="span-required" id="span-telefone-admin">Necessário telefone com 11 dígitos.</span>
                    </div>

                    <div class="campo">
                        <input required="" type="text" name="text" autocomplete="off" class="input" id="in_email">
                        <label class="user-label">E-mail do admistrador</label>
                        <span class="span-required" id="span-email-admin">É necessário inserir um e-mail.</span>
                    </div> 
                </div>

                <div class="linha">
                    <div class="campo">
                        <input required="" type="password" name="text" autocomplete="off" class="input" id="in_senha">
                        <label class="user-label">Criar uma senha</label>
                        <span class="span-required" id="span-senha-admin" style="max-width: 280px;">Senha deve conter caracteres especiais e alfanuméricos maiúsculos e minúsculos.</span>
                    </div>

                    <div class="campo">
                        <input required="" type="password" name="text" autocomplete="off" class="input" id="in_confirmacao">
                        <label class="user-label">Confirmar senha</label>
                        <span class="span-required" id="span-confirm-senha-admin" style="max-width: 280px;">Senha deve conter caracteres especiais e alfanuméricos maiúsculos e minúsculos.</span>
                    </div>
                </div>

                <button class="buttonLogin" onclick="cadastrarAdmin();">Cadastrar</button>
            </div>

            <div id="div_aguardar" class="loading-div">
                <img src="./assets/loading_blue.gif" id="loading-gif">
            </div>

            <div id="div_erros_login">

            </div>
        </div>
    </div>
</body>
</html>

<script>
    const patternsTel = {
        TELEFONE_11: /^(\d{2})(\d{5})(\d{4})/,
        TELEFONE_6: /^(\d{2})(\d{4})/,
        TELEFONE_2: /^(\d{2})/,
    }

    function mascaraTelefoneAdmin() {
    let telefoneAdmin = in_telefone.value.replace(/\D+/g, '').trim(); 

    if (telefoneAdmin.length > 11) {
        return false;
    }

    if (telefoneAdmin.length > 10) {
        telefoneAdmin = telefoneAdmin.replace(patternsTel.TELEFONE_11, "($1) $2-$3");
    }  else if (telefoneAdmin.length > 6) {
        telefoneAdmin = telefoneAdmin.replace(patternsTel.TELEFONE_6, "($1) $2-");
    } else if (telefoneAdmin.length > 1) {
        telefoneAdmin = telefoneAdmin.replace(patternsTel.TELEFONE_2, "($1)");
    }

    in_telefone.value = telefoneAdmin;
}
</script>